npc_id: "merchant_001"
conversations:
  introduction:
    text: "안녕하세요! 저는 이 마을의 상인입니다. 필요한 것이 있으시면 언제든 말씀하세요!"
    choices:
      - text: "상점을 보고 싶어요"
        next: "shop_menu"
        action: "set_flag:shop_unlocked:true"
      - text: "그냥 구경하러 왔어요"
        next: "casual_chat"
        action: "add_stat:gold:5"
      - text: "안녕히 계세요"
        next: null
        action: null
  
  shop_menu:
    text: "좋습니다! 저희 상점에는 모험에 유용한 물건들이 많이 있어요. 특히 체력 포션을 추천합니다!"
    choices:
      - text: "체력 포션을 사겠습니다 (10골드)"
        next: "buy_potion"
        condition: "gold>=10"
        action: "add_stat:gold:-10;add_item:health_potion:1"
      - text: "돈이 부족해요..."
        next: "no_money"
        condition: "gold<10"
        action: null
      - text: "다음에 다시 올게요"
        next: "goodbye"
        action: null
  
  buy_potion:
    text: "감사합니다! 체력 포션 하나를 드렸습니다. 위험할 때 사용하세요!"
    choices:
      - text: "감사합니다!"
        next: "goodbye"
        action: "add_stat:experience:5"
  
  no_money:
    text: "걱정하지 마세요! 모험을 하다 보면 골드를 모을 수 있을 거예요. 행운을 빕니다!"
    choices:
      - text: "네, 알겠습니다"
        next: "goodbye"
        action: "add_stat:experience:1"
  
  casual_chat:
    text: "구경 와주셔서 감사합니다! 이 마을에 처음 오신 건가요? 작은 선물이라도 드리고 싶네요."
    choices:
      - text: "정말 감사합니다!"
        next: "give_gift"
        action: "add_stat:gold:5"
      - text: "괜찮습니다"
        next: "polite_decline"
        action: null
  
  give_gift:
    text: "여기 골드 몇 개입니다. 마을에 적응하는 데 도움이 되길 바라요!"
    choices:
      - text: "정말 감사합니다!"
        next: "check_reputation"
        action: "set_flag:merchant_gift_received:true;set_global:reputation:5"
  
  polite_decline:
    text: "정중하시네요! 언제든 필요한 게 있으면 말씀하세요."
    choices:
      - text: "네, 감사합니다"
        next: "goodbye"
        action: null
  
  check_reputation:
    text: "아, 그런데 마을에서 평판이 쌓이고 있는 것 같군요! 앞으로 더 좋은 서비스를 받으실 수 있을 거예요."
    choices:
      - text: "감사합니다! (평판 높음)"
        next: "vip_treatment"
        condition: "global.reputation >= 10"
        action: "set_flag:vip_customer:true"
      - text: "앞으로 더 노력하겠습니다"
        next: "regular_goodbye"
        condition: "global.reputation < 10"
        action: "set_global:story_progress:met_merchant"
        
  vip_treatment:
    text: "평판이 높은 고객님께는 특별 혜택을 드립니다! 앞으로 저와 거래할 때 할인을 받으실 수 있어요."
    choices:
      - text: "훌륭하네요!"
        next: "goodbye"
        condition: "flags.vip_customer == true"
        action: "add_stat:gold:20"
      - text: "감사합니다"
        next: "goodbye"
        action: null
        
  regular_goodbye:
    text: "계속 좋은 일들을 하시면 마을 사람들이 더욱 좋아할 거예요!"
    choices:
      - text: "네, 알겠습니다"
        next: "goodbye"
        action: null

  goodbye:
    text: "좋은 하루 되세요! 또 오세요!"
    choices: null 